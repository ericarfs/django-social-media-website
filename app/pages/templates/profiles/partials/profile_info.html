<div class="profile-header">
    <div class="profile-icon-container">

    </div>
    <div class= "profile-user"> 
        <h4><b>{{username}}</b></h4>        
        <div class="user-actions">
            {%if request.user.username == profile.get_user %}
            <div class="edit-container">
                <button type="button" class="btn btn-follow"
                        hx-post="{%url 'pages:profile-edit' username %}"
                        hx-trigger="click" 
                        hx-disabled-elt="this"
                        hx-target="section"
                        hx-replace-url="true"
        
                > Edit</button>
            </div>
            {% else %}
                <div class="follow-container">
                    {% if request.user in profile.get_followers %}
                        <button type="button" class="btn inverse btn-unfollow"
                                hx-post="{%url 'pages:unfollow-user' username %}"
                                hx-trigger="click" 
                                hx-target=".profile-info"
                                hx-disabled-elt="this"
                        > Unfollow </button>
                    {% else %}
                        <button type="button" class="btn btn-follow"
                                hx-post="{%url 'pages:follow-user' username %}"
                                hx-trigger="click" 
                                hx-target=".profile-info"
                                hx-disabled-elt="this"
                    > Follow </button>
                    {% endif %}
                </div>
            {% endif %}
    
            {%if request.user.username != profile.get_user %}
            <div class="profile-actions">
                <li class="action" id="action-block-profile"
                    type="button"
                    hx-get=""
                    hx-trigger="click"
                    hx-target=".posts-container"
                    name="Block profile">
                    <i class="fi fi-rr-cross-circle"></i>
                </li>
                <li class="action" id="action-mute"
                    type="button"
                    hx-delete=""
                    hx-trigger="click"
                    hx-target=".posts-container"
                    hx-confirm="Are you sure you want to delete?"
                    name="Mute profile">
                    <i class="fi fi-sr-volume-mute"></i>
                </li> 
            </div>
            {% endif %}
        </div>
    </div>
</div>
<div class="profile-stats">
    <div class="stats">
        <span id="followers_count">{{profile.followers_count}}</span>
        <span>Followers</span>
    </div>
    <div class="stats">
        <span id="following_count">{{profile.following_count}}</span>
        <span>Following</span>
    </div>
    <div class="stats">
        <span id="posts_count">{{profile.posts_count}}</span>
        <span>Answers</span>
    </div>
</div>
<div class="grid">
    <div class="message-form-container">
        <form method="post">
        {% csrf_token %}
            <input type="hidden" id="username" name="username" value={{profile.get_user}}>
            <textarea id="message" name="body" required
                    hx-get="{%url 'pages:check-question' %}" 
                    hx-trigger="keyup" 
                    hx-target=".char-count"
                    placeholder="{{profile.question_helper}}"
            ></textarea><br>
            <div class="char-count">
                <span id="count">  0</span> / 1024
            </div>

            <div class="send-area">
                <div>
                {%if request.user.username == profile.get_user %}
                    <input type="checkbox" name="anon" id="hide-name" name="hide-name" disabled/>
                {% else %}
                    <input type="checkbox" name="anon" id="hide-name" name="hide-name" checked/>
                {% endif %}
                <label for="hide-name" style=" color: var(--grey);">Hide your name</label>
            </div>
            <div class="message-button">
                <button type="button" class="btn btn-msg"
                    hx-post="{%url 'pages:save-question' %}"
                    hx-trigger="click" 
                    hx-target=".response-container"
                    hx-disabled-elt="this"
                > Send </button>
            </div>
        </div>
        </form>
    </div>
    <div class="response-container">
    </div>
</div>